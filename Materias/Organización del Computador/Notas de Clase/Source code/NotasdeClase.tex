%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Configuración de Paquetes
\documentclass{article}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{booktabs}
\usepackage{float}
\usepackage{scrextend}
\usepackage{titletoc}
\usetikzlibrary{calc}
\input{config_packages} % Incluir configuración de paquetes y encabezado
\input{config_listings} % Incluir configuración de listings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\fancypagestyle{mipagina}{
    \fancyhf{} % Limpiar encabezado y pie de página
    \fancyhead[L]{Pedro Villar} % Nombre a la izquierda
    \fancyhead[C]{Notas Teóricas} % Sección actual al centro
    \fancyhead[R]{Organización del Computador} % Texto a la derecha
    \fancyfoot[C]{\thepage} % Número de página al centro
    \renewcommand{\headrulewidth}{0.4pt} % Grosor de la línea horizontal en el encabezado
}

\pagestyle{mipagina}
\mdfsetup{skipabove=\topskip,skipbelow=\topskip}

% Box de Definición
\newcounter{def}[section]

\NewDocumentEnvironment{defi}{o}{%
    \stepcounter{def}%
    \begin{mdframed}[
        frametitle={%
            \begin{tikzpicture}[baseline=(current bounding box.east),outer sep=0pt]
                \node[anchor=east,rectangle,fill=blue!20,inner xsep=5pt] at (0,0) {\strut\IfValueTF{#1}{Definición~\thedef:~#1}{Definición~\thedef}};
            \end{tikzpicture}%
        },
        innertopmargin=5pt,
        linecolor=blue!20,
        linewidth=2pt,
        topline=true,
        frametitleaboveskip=-\ht\strutbox, % Ajuste de espacio entre título y contenido
        frametitlealignment={\hspace{5pt}}, % Ajuste de espacio entre el borde del frame y el título
    ]
}{%
    \end{mdframed}%
}

% Box de ejemplos
\newcounter{ejemplo}[section]

\NewDocumentEnvironment{ejemplo}{o}{%
    \stepcounter{ejemplo}%
    \begin{mdframed}[
        frametitle={%
            \begin{tikzpicture}[baseline=(current bounding box.east),outer sep=0pt]
                \node[anchor=east,rectangle,fill=brown!30,inner xsep=5pt] at (0,0) {\strut\IfValueTF{#1}{Ejemplo~\theejemplo:~#1}{Ejemplo~\theejemplo}};
            \end{tikzpicture}%
        },
        innertopmargin=5pt,
        linecolor=brown!30,
        linewidth=2pt,
        topline=true,
        frametitleaboveskip=-\ht\strutbox, % Ajuste de espacio entre título y contenido
        frametitlealignment={\hspace{5pt}}, % Ajuste de espacio entre el borde del frame y el título
    ]
}{%
    \end{mdframed}%
}

% Entorno para Métodos (color verde)
\newcounter{metodo}[section]
\NewDocumentEnvironment{metodo}{o}{%
    \stepcounter{metodo}%
    \begin{mdframed}[
        frametitle={%
            \begin{tikzpicture}[baseline=(current bounding box.east),outer sep=0pt]
                \node[anchor=east,rectangle,fill=green!30,inner xsep=5pt] at (0,0) {\strut\IfValueTF{#1}{Método~\themetodo:~#1}{Método~\themetodo}};
            \end{tikzpicture}%
        },
        innertopmargin=5pt,
        linecolor=green!30,
        linewidth=2pt,
        topline=true,
        frametitleaboveskip=-\ht\strutbox, % Ajuste de espacio entre título y contenido
        frametitlealignment={\hspace{5pt}}, % Ajuste de espacio entre el borde del frame y el título
    ]
}{%
    \end{mdframed}%
}

% Entorno para Observaciones (color amarillo más oscuro)
\newcounter{observacion}[section]
\NewDocumentEnvironment{observacion}{o}{%
    \stepcounter{observacion}%
    \begin{mdframed}[
        frametitle={%
            \begin{tikzpicture}[baseline=(current bounding box.east),outer sep=0pt]
                \node[anchor=east,rectangle,fill=yellow!50,inner xsep=5pt] at (0,0) {\strut\IfValueTF{#1}{Observación~\theobservacion:~#1}{Observación~\theobservacion}};
            \end{tikzpicture}%
        },
        innertopmargin=5pt,
        linecolor=yellow!50,
        linewidth=2pt,
        topline=true,
        frametitleaboveskip=-\ht\strutbox, % Ajuste de espacio entre título y contenido
        frametitlealignment={\hspace{5pt}}, % Ajuste de espacio entre el borde del frame y el título
    ]
}{%
    \end{mdframed}%
}

% Entorno para Ejercicio
\newcounter{ejer}[section]
\NewDocumentEnvironment{ejer}{o}{%
    \stepcounter{ejer}%
    \begin{mdframed}[
        frametitle={%
            \begin{tikzpicture}[baseline=(current bounding box.east),outer sep=0pt]
                \node[anchor=east,rectangle,fill=black!30,inner xsep=5pt] at (0,0) {\strut\IfValueTF{#1}{Ejercicio~\theejer:~#1}{Ejercicio~\theejer}};
            \end{tikzpicture}%
        },
        innertopmargin=5pt,
        linecolor=black!30,
        linewidth=2pt,
        topline=true,
        frametitleaboveskip=-\ht\strutbox, % Ajuste de espacio entre título y contenido
        frametitlealignment={\hspace{5pt}}, % Ajuste de espacio entre el borde del frame y el título
    ]
}{%
    \end{mdframed}%
}

\newenvironment{solution}
    {\textit{Solución:}}
    {}

%Configuraciones adicionales
\binoppenalty=\maxdimen 
\relpenalty=\maxdimen 

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Condiguracion de la portada
\begin{titlepage}
    \begin{tikzpicture}[remember picture,overlay,inner sep=0,outer sep=0]
         \draw[blue!70!black,line width=4pt] ([xshift=-1.5cm,yshift=-2cm]current page.north east) coordinate (A)--([xshift=1.5cm,yshift=-2cm]current page.north west) coordinate(B)--([xshift=1.5cm,yshift=2cm]current page.south west) coordinate (C)--([xshift=-1.5cm,yshift=2cm]current page.south east) coordinate(D)--cycle;
    
         \draw ([yshift=0.5cm,xshift=-0.5cm]A)-- ([yshift=0.5cm,xshift=0.5cm]B)--
         ([yshift=-0.5cm,xshift=0.5cm]B) --([yshift=-0.5cm,xshift=-0.5cm]B)--([yshift=0.5cm,xshift=-0.5cm]C)--([yshift=0.5cm,xshift=0.5cm]C)--([yshift=-0.5cm,xshift=0.5cm]C)-- ([yshift=-0.5cm,xshift=-0.5cm]D)--([yshift=0.5cm,xshift=-0.5cm]D)--([yshift=0.5cm,xshift=0.5cm]D)--([yshift=-0.5cm,xshift=0.5cm]A)--([yshift=-0.5cm,xshift=-0.5cm]A)--([yshift=0.5cm,xshift=-0.5cm]A);
    
    
         \draw ([yshift=-0.3cm,xshift=0.3cm]A)-- ([yshift=-0.3cm,xshift=-0.3cm]B)--
         ([yshift=0.3cm,xshift=-0.3cm]B) --([yshift=0.3cm,xshift=0.3cm]B)--([yshift=-0.3cm,xshift=0.3cm]C)--([yshift=-0.3cm,xshift=-0.3cm]C)--([yshift=0.3cm,xshift=-0.3cm]C)-- ([yshift=0.3cm,xshift=0.3cm]D)--([yshift=-0.3cm,xshift=0.3cm]D)--([yshift=-0.3cm,xshift=-0.3cm]D)--([yshift=0.3cm,xshift=-0.3cm]A)--([yshift=0.3cm,xshift=0.3cm]A)--([yshift=-0.3cm,xshift=0.3cm]A);
    
    \end{tikzpicture}
    \begin{center}
        \vspace{7pt}
        
        \textbf{Pedro Villar}
        
        \vspace{7pt}
    
    \end{center}
    \vspace{15pt}
    \begin{center}
        \includegraphics[scale=0.25]{famaf-logo.jpg}
        
        \vspace{50pt}
        \fontsize{18pt}{17pt}\selectfont 
        \textbf{Notas de Clase} 
        
        \vspace{7pt}
        \textbf{Organización del Computador}
    \end{center}
    
    \vspace{15pt}
    
    \vspace{10pt}
    \begin{center}
        \textbf{\date{today}}
    \end{center}
    \vspace{25pt} % Espacio vertical adicional
    
    \begin{center}
        \textbf{Primer Cuatrimestre 2024}
    \end{center}
\end{titlepage}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Condiguracion del índice
\clearpage

\thispagestyle{empty}
\begin{center}
    \huge \textbf{Índice de Contenido}
\end{center}

\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}

\startcontents
\printcontents{}{1}{}

\newpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{Sec1.tex}

\end{document}